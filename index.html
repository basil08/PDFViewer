<!DOCTYPE html>
<html>
<head>
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-171640245-2"></script>

	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'UA-171640245-2');
	</script>



	<title>PDF Viewer</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<script type="text/javascript" src="https://documentcloud.adobe.com/view-sdk/main.js"></script>

	<!-- <link rel="stylesheet" type="text/css" href="style.css" /> -->
</head>
<body>
	<h1 style="text-align: center;padding: 20px">PDF Viewer</h1>
	<!-- menu buttons goes here -->

	<div id="adobe-dc-view"></div>

	<script type="text/javascript">
		document.addEventListener("adobe_dc_view_sdk.ready", () => {
				const adobeDCView = new AdobeDC.View({clientId:"1a60003e5fd949c3b91aff19c242caff",divId:"adobe-dc-view"});
				adobeDCView.previewFile({
					content:{ location: { url:"https://basil08.github.io/PDFViewer/sample.pdf" } },
					metaData:{ fileName:"sample.pdf" } },
					{ enablePDFAnalytics:true });
				const eventOptions = {
					// Pass eveents to receive
					// If no event is passed in listenOn, then all file preview events will be received
					listenOn:[
					],
					enableFilePrevewEvents:true,
					enablePDFAnalytics:true
				}

				adobeDCView.registerCallback(
					AdobeDC.View.Enum.CallbackType.EVENT_LISTENER,
					(event) => {
						console.log(event);
							switch(event.type){
							case "DOCUMENT_OPEN": 					// send relevant ones to ga
							ga('send','event','DOCUMENT_OPEN', event.data.fileName, 'Document was opened.');
							break;
							case "PAGE_VIEW":
							ga('send','event','PAGE_VIEW',`${event.data.pageNumber} of ${event.data.fileName}`, 'view page');
							break;
							case "DOCUMENT_DOWNLOAD":
							ga('send','event','DOCUMENT_DOWNLOAD',event.data.fileName,'Document download');
							break;
							case "TEXT_COPY":
							ga('send','event','TEXT_COPY',`${event.data.copiedText} from ${event.data.fileName}`, 'text copied');
							break;
							default: 								// ignore all the rest for now..
			}
					}, eventOptions
					);

		});

	</script>

</body>
</html>